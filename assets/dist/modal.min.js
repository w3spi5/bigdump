(function(){"use strict";var l={},w=["button:not([disabled])","a[href]",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(", ");function d(e){var n=e.querySelectorAll(w);return Array.prototype.filter.call(n,function(i){return i.offsetParent!==null})}function f(e,n){if(e.key==="Tab"){var i=d(n);if(i.length!==0){var r=i[0],o=i[i.length-1];e.shiftKey?document.activeElement===r&&(e.preventDefault(),o.focus()):document.activeElement===o&&(e.preventDefault(),r.focus())}}}function u(e,n,i){var r=document.getElementById(n);if(!(!r||r.classList.contains("hidden"))){if(e.key==="Escape"){e.preventDefault(),i();return}f(e,r)}}function m(e,n){var i=document.getElementById(e);if(i){l[e]=n||document.activeElement,i.classList.remove("hidden");var r=i.querySelector('[role="dialog"]')||i.querySelector(".modal");setTimeout(function(){var o=d(r||i);o.length>0&&o[0].focus()},50)}}function g(e){var n=document.getElementById(e);if(n){n.classList.add("hidden");var i=l[e];i&&typeof i.focus=="function"&&setTimeout(function(){i.focus()},50),delete l[e]}}function c(){document.addEventListener("keydown",function(e){u(e,"previewModal",function(){typeof window.closePreviewModal=="function"&&window.closePreviewModal()})}),document.addEventListener("keydown",function(e){u(e,"historyModal",function(){typeof window.closeHistoryModal=="function"&&window.closeHistoryModal()})}),y()}function y(){var e=window.previewFile;typeof e=="function"&&(window.previewFile=function(o){l.previewModal=document.activeElement,e(o),setTimeout(function(){var t=document.getElementById("previewModal");if(t&&!t.classList.contains("hidden")){var a=t.querySelector('[role="dialog"]'),s=d(a||t);s.length>0&&s[0].focus()}},100)},window.BigDump=window.BigDump||{},window.BigDump.previewFile=window.previewFile);var n=window.closePreviewModal;typeof n=="function"&&(window.closePreviewModal=function(o){if(!(o&&o.target!==o.currentTarget)){var t=l.previewModal;n.call(this,o),t&&typeof t.focus=="function"&&setTimeout(function(){t.focus()},50),delete l.previewModal}},window.BigDump=window.BigDump||{},window.BigDump.closePreviewModal=window.closePreviewModal);var i=window.showHistory;typeof i=="function"&&(window.showHistory=function(){l.historyModal=document.activeElement,i(),setTimeout(function(){var o=document.getElementById("historyModal");if(o&&!o.classList.contains("hidden")){var t=o.querySelector('[role="dialog"]'),a=d(t||o);a.length>0&&a[0].focus()}},100)},window.BigDump=window.BigDump||{},window.BigDump.showHistory=window.showHistory);var r=window.closeHistoryModal;typeof r=="function"&&(window.closeHistoryModal=function(o){if(!(o&&o.target!==o.currentTarget)){var t=l.historyModal;r.call(this,o),t&&typeof t.focus=="function"&&setTimeout(function(){t.focus()},50),delete l.historyModal}},window.BigDump=window.BigDump||{},window.BigDump.closeHistoryModal=window.closeHistoryModal)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):setTimeout(c,0),window.BigDump=window.BigDump||{},window.BigDump.modal={open:m,close:g,getFocusable:d}})();
